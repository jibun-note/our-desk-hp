# OurDesk HP コーディング規約

本ドキュメントは、当プロジェクト（Next.js + TypeScript + React）における命名・コンポーネントの扱い・ファイル構成などの規約を定めます。

---

## 1. ディレクトリ構成の目安

```
app/                    # App Router のページ・レイアウト
  layout.tsx
  page.tsx
  (static)/             # 静的ページ群
    company/
    about-us/
    ...
components/
  layout/               # ヘッダー・フッター・Layout
  sections/             # ページを構成するセクション
  ui/                   # ボタン・カルーセル等の共通UI
  seo/                  # JSON-LD 等 SEO 用
lib/
  data/                 # ページ用のデータ（home, 他）
  utils.ts              # cn 等
  seo.ts                # createPageMetadata 等
```

- 新規セクションは **`components/sections/`**、新規の共通UIは **`components/ui/`** に追加する。
- ページ・セクションへ渡すデータ（流し込み用の定数・配列など）は **`lib/data`** 配下にファイルを作成して配置する。

---

## 2. 命名規則

### 2.1 ファイル・ディレクトリ

| 種別 | 規則 | 例 |
|------|------|-----|
| **React コンポーネント** | PascalCase、拡張子 `.tsx` | `HomeHeroSection.tsx` / `StrengthCards.tsx` |
| **ユーティリティ・ヘルパー** | camelCase、拡張子 `.ts` | `utils.ts` / `contentHighlight.tsx`（コンポーネント含む場合は `.tsx`） |
| **データ・定数** | camelCase または PascalCase（定数オブジェクトは状況に応じて） | `home.tsx` / `createPageMetadata` |
| **ディレクトリ** | 用途に応じて camelCase または kebab-case | `components/sections` / `(static)/about-us` |

- ページは App Router のルートに合わせてディレクトリ名を使用する（例: `app/(static)/company/page.tsx`）。
- コンポーネントは**1ファイル1コンポーネント**を原則とし、ファイル名と**デフォルトエクスポートのコンポーネント名を一致**させる。

### 2.2 変数・関数・型

| 種別 | 規則 | 例 |
|------|------|-----|
| **変数・関数** | camelCase | `strengthCards`, `createPageMetadata` |
| **コンポーネント** | PascalCase | `HomeHeroSection`, `StrengthCards` |
| **型・インターフェース** | PascalCase、型は `type` を優先 | `StrengthCardItem`, `Props` |
| **定数（変更しない値）** | UPPER_SNAKE_CASE または PascalCase | `SPLIT_TEXT_PROPS`, `MAP_LINK_AOYAMA` |
| **React の Props 型** | そのコンポーネント専用なら `Props`、用途が分かる名前でも可 | `type Props = { cards: StrengthCardItem[] }` |

### 2.3 その他

- イベントハンドラは `handle` プレフィックスを付けるか、用途が明らかな名前にする（例: `handleClick`, `scrollPrev`）。
- 真偽値を表す変数は `is` / `has` / `should` などを付ける（例: `showImage`, `canScrollPrev`）。

---

## 3. コンポーネントの呼び出し方

### 3.1 インポート

- **パスエイリアス `@/`** を使用する。相対パス `../` は避ける。
- コンポーネントは**デフォルトインポート**で読み込む。
- 型のみ必要な場合は `type` インポートを使う。

```tsx
// 推奨
import HomeHeroSection from '@/components/sections/HomeHeroSection'
import StrengthSection from '@/components/sections/StrengthSection'
import { type StrengthCardItem } from '@/components/sections/StrengthCards'
import { createPageMetadata } from '@/lib/seo'

// 非推奨（相対パス）
import HomeHeroSection from '../../../components/sections/HomeHeroSection'
```

### 3.2 ページでの使用

- ページコンポーネント（`app/**/page.tsx`）では、**表示ブロックごとにセクションコンポーネントに分割**して呼び出す。
- データは `lib/data` などから取得し、props で渡す。ページファイル内に大きなデータ配列を書く場合は、同じファイルの上部にまとめるか、`lib/data` に切り出す。

```tsx
// 推奨（app/page.tsx の例）
import HomeHeroSection from '@/components/sections/HomeHeroSection'
import HomeIntroSection from '@/components/sections/HomeIntroSection'
import StrengthSection from '@/components/sections/StrengthSection'
import { strengthCards } from '@/lib/data/home'

export default function Home() {
    return (
        <main className="min-h-screen">
            <HomeHeroSection />
            <HomeIntroSection />
            <StrengthSection cards={strengthCards} />
        </main>
    )
}
```

- ルートレイアウトでは `Layout` で共通のヘッダー・フッターを包み、その中に `children` を渡す。

### 3.3 コンポーネント同士の参照

- セクション → UI コンポーネント: `@/components/ui/...` をインポート。
- セクション → 他のセクション: `@/components/sections/...` をインポート。
- レイアウト用: `@/components/layout/...` から読み込む。
- 同じディレクトリ内のコンポーネントを参照する場合も、**`@/` から書く**（一貫性のため）。

---

## 4. コンポーネントの作成ルール

### 4.1 コンポーネントを作るタイミング

- **同じ見た目・振る舞いを複数箇所で使う**ときはコンポーネントにする。
- **ページを「ブロック」に分けたい**とき（ヒーロー、紹介、強みなど）はセクションコンポーネントにする。
- **1ファイルが長くなりすぎる**ときは、意味のまとまりで別コンポーネントに切り出す。

### 4.2 ファイルの基本形

- **1ファイルに1つの「メイン」コンポーネント**を置き、それを **`export default`** する。
- ファイル名と、その default で export しているコンポーネント名は **一致させる**（例: `StrengthSection.tsx` → `function StrengthSection`）。
- コンポーネントは **関数宣言**で書く（アロー関数ではなく `function ComponentName() { ... }`）。

```tsx
// components/sections/ExampleSection.tsx

type Props = {
    title: string
}

export default function ExampleSection({ title }: Props) {
    return (
        <section aria-label={title}>
            <h2>{title}</h2>
        </section>
    )
}
```

### 4.3 Props の基本（渡す側・受け取る側）

#### 呼び出し側（props を渡す）

- コンポーネントを **タグ**として書き、**属性**でデータを渡す。この属性のまとまりが「props」。
- 書き方: **属性名={式}**。文字列は `"文字列"` または `{'文字列'}`、変数や式は `{変数}`。

```tsx
// 例: ページや親コンポーネント内
<HomeHeroSection />
<StrengthSection cards={strengthCards} />
<HeroSection title="Company" description="会社情報" />
```

- **渡せるもの**: 文字列・数値・真偽値・配列・オブジェクト・JSX（`children`）など。すべて `{ }` で囲む（文字列だけ `" "` も可）。

#### 定義側（props を受け取る）

- 関数の **第1引数**で props を受け取る。**型を必ず定義**する。
- 引数は **分割代入**で書くのが基本。必要なプロパティだけ受け取る。

```tsx
// Props の型を定義
type Props = {
    title: string
    description?: string   // 省略可能
    cards: StrengthCardItem[]
}

// 分割代入で受け取る
export default function StrengthSection({ title, description, cards }: Props) {
    return (
        <section>
            <h2>{title}</h2>
            {description != null && <p>{description}</p>}
            {cards.map((card) => (
                <div key={card.step}>{card.title}</div>
            ))}
        </section>
    )
}
```

- **注意**: props は **読み取り専用**。受け取ったオブジェクトや配列をコンポーネント内で書き換えない。

### 4.4 Props のパターン別の書き方

#### パターンA: props が不要なコンポーネント

- 固定の見た目だけの場合は、Props 型を書かず引数も不要。

```tsx
export default function HomeIntroSection() {
    return (
        <section aria-label="OurDeskの想い">
            <h2>「働きたい」をちゃんと育てる。</h2>
        </section>
    )
}

// 呼び出し: <HomeIntroSection />
```

#### パターンB: 1〜2個の props（文字列・数値など）

- 型と引数をそのまま書く。

```tsx
type Props = {
    title: string
    description: string
}

export default function HeroSection({ title, description }: Props) {
    return (
        <section>
            <h1>{title}</h1>
            <p>{description}</p>
        </section>
    )
}

// 呼び出し: <HeroSection title="Company" description="会社情報" />
```

#### パターンC: 配列（リスト・カード）を渡す

- データはページや `lib/data` で用意し、**配列をそのまま props で渡す**。コンポーネント内では `map` で描画する。

```tsx
type Props = {
    cards: StrengthCardItem[]
}

export default function StrengthSection({ cards }: Props) {
    return (
        <section aria-label="OurDeskの強み">
            {cards.map((card) => (
                <div key={card.step}>{card.title}</div>
            ))}
        </section>
    )
}

// 呼び出し（ページ側）:
// import { strengthCards } from '@/lib/data/home'
// <StrengthSection cards={strengthCards} />
```

#### パターンD: children（タグの内側に書いた内容）を渡す

- レイアウトやラッパーでは、**`children`** で「中身」を受け取る。型は `React.ReactNode`。

```tsx
type Props = {
    children: React.ReactNode
}

export default function Layout({ children }: Props) {
    return (
        <div className="min-h-screen">
            <Header />
            <main>{children}</main>
            <Footer />
        </div>
    )
}

// 呼び出し:
// <Layout>
//     <HomeHeroSection />
//     <HomeIntroSection />
// </Layout>
```

#### パターンE: オプショナルな props とデフォルト値

- 省略可能にしたい場合は **`?`** を付ける。デフォルト値は引数で `= 値` と書く。

```tsx
type Props = {
    title: string
    className?: string
    priority?: boolean
}

export default function Card({ title, className, priority = false }: Props) {
    return (
        <div className={className}>
            <h3>{title}</h3>
            {priority && <span>優先</span>}
        </div>
    )
}
```

### 4.5 Props の型定義のルール

- **そのコンポーネント専用の型**は、ファイル先頭付近で `type Props = { ... }` と定義する。必要なら別名（例: `HeroSectionProps`）でもよい。
- **他ファイルからも使う型**（例: カード1件の形）は **`export type`** して、データや親から `import type { ... }` で参照する。

```tsx
// 他から参照される型は export
export type StrengthCardItem = {
    step: number
    title: string
    description: string
    imagePath: string
    imageAlt: string
}

type Props = {
    cards: StrengthCardItem[]
}

export default function StrengthCards({ cards }: Props) {
    // ...
}
```

- **`any` は使わない**。分からない型は `unknown` や適切な型を定義する。

### 4.6 クライアントコンポーネント（`'use client'`）

- **useState / useEffect / イベントハンドラ / ブラウザ API** など、クライアントで動かす必要があるときは、**ファイルの先頭1行に `'use client'`** を書く。
- それ以外のコンポーネントは `'use client'` を付けず、サーバーコンポーネントのままにする。

```tsx
'use client'

import { useState } from 'react'

export default function SomeInteractiveSection() {
    const [open, setOpen] = useState(false)
    return (
        <section>
            <button type="button" onClick={() => setOpen(!open)}>開く</button>
            {open && <p>表示中</p>}
        </section>
    )
}
```

### 4.7 内部専用のコンポーネント・型

- **そのファイルの default コンポーネントからだけ使う**小さな部品は、**同じファイル内に通常の関数**として定義し、export しない。
- 他ファイルから参照する型だけ **`export type`** する。

```tsx
// 他から参照される型は export
export type StrengthCardItem = { ... }

// 内部専用：export しない
function StrengthSlide({ slide, showImage }: { slide: StrengthCardItem; showImage: boolean }) {
    return <div>...</div>
}

function StrengthCardsNav({ cardsLength }: { cardsLength: number }) {
    return <div>...</div>
}

type Props = { cards: StrengthCardItem[] }

export default function StrengthCards({ cards }: Props) {
    return (
        <div>
            {cards.map((slide, index) => (
                <StrengthSlide key={slide.step} slide={slide} showImage />
            ))}
            <StrengthCardsNav cardsLength={cards.length} />
        </div>
    )
}
```

### 4.8 セクションコンポーネント（配置・マークアップ）

- ページを構成する大きなブロックは **`components/sections/`** に置く。
- ルート要素は **`<section>`** とし、**`aria-label`** で内容を説明する。

```tsx
<section className="..." aria-label="OurDeskの強み">
```

- 見出し（`h1`〜`h6`）はページ全体で階層を飛ばさないようにする。

### 4.9 UI 部品・レイアウトの配置

- ボタン・カルーセルなど **再利用する小さな部品** → **`components/ui/`**
- ヘッダー・フッター・全体レイアウト → **`components/layout/`**
- キーボード・フォーカスを扱うものは既存のプリミティブ（Radix 等）を優先する。アイコンのみのボタンには **`aria-label`** を付ける。

### 4.10 スタイル・データの受け渡し

- スタイルは **Tailwind CSS** で書く。条件でクラスを付け替えるときは **`cn()`**（`@/lib/utils`）を使う。
- 一覧データは **親（ページやセクション）で用意し、props で渡す**。データの型はコンポーネント側で定義し、`lib/data` では `import type { ... }` でその型を使う。

```tsx
// lib/data/home.tsx
import { type StrengthCardItem } from '@/components/sections/StrengthCards'

export const strengthCards: StrengthCardItem[] = [
    { step: 1, title: '...', ... },
    // ...
]
```

---

## 5. その他

### 5.1 SEO

- 各ページでは **`createPageMetadata`**（`@/lib/seo`）を使って `metadata` を export する。

### 5.2 コメント

- 複雑なレイアウトや意図が分かりにくい部分には、日本語で簡潔にコメントを残す（例: 「モバイル用見出し」「横スクロール防止」）。

### 5.3 型

- `any` は使わず、必要な型を定義する。
- 他モジュールの型は `import type { ... }` で取得する。

---

この規約は、既存の `app/`・`components/`・`lib/` の実装に合わせて整理しています。新規実装時は本規約と UI Skills を参照してください。
